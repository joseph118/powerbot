import org.powerbot.script.PollingScript;
import org.powerbot.script.Script;
import org.powerbot.script.rt6.ClientContext;

import javax.swing.*;
import javax.swing.text.NumberFormatter;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.text.NumberFormat;
import java.util.*;
import java.util.List;

/**
 * Created by Joseph18 on 11/29/2014.
 */


@Script.Manifest(name = "eMonk Destroyer", description = "Kills monks for ever")
public class jBorg extends PollingScript<ClientContext>{
    private final int npcID = 7727;
    private int healthPercentageToHeal = 90;
    private boolean isSkillOn = false;
    private int maxKey = 2;
    private JFrame frame;

    private List<Task> taskList = new ArrayList<Task>();

    @Override
    public void start(){
        UIManager.put("swing.boldMetal", Boolean.FALSE);

        frame = new JFrame("eMonk Killer");
        jBorgUI f = new jBorgUI(this);
        f.userInterface(frame.getContentPane());
        frame.pack();
        frame.setResizable(false);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
    }

    public void startBot(){
        frame.dispose();
        taskList.addAll(Arrays.asList(
                new Attack(ctx, npcID, healthPercentageToHeal),
                new Talk(ctx, npcID, healthPercentageToHeal),
                new Chat(ctx),
                new Heal(ctx),
                new Skills(ctx, isSkillOn, 2),
                new Danger(ctx),
                new Human(ctx)
        ));
    }

    @Override
    public void poll(){
        for (Task task : taskList){
            if(task.activate()){
                task.execute();
            }
        }
    }

    public void setHealthPercentageToHeal(int x){
        this.healthPercentageToHeal = x;
    }

    public void setIsSkillOn(boolean x){
        this.isSkillOn = x;
    }

    public void setMaxKey(int x){
        this.maxKey = x;
    }
}
